# 1. Checkout
- uses: actions/checkout@v3

# 2. Node setup
- uses: actions/setup-node@v3
  with:
    node-version: '18'

# 3. Install dependencies
- run: npm install

# 4. Install Playwright Linux dependencies
- run: |
    sudo apt-get update
    sudo apt-get install -y \
      libnss3 \
      libatk1.0-0 \
      libatk-bridge2.0-0 \
      libcups2 \
      libdrm2 \
      libxkbcommon0 \
      libxcomposite1 \
      libxdamage1 \
      libxrandr2 \
      libgbm1 \
      libpangocairo-1.0-0 \
      libgtk-4-1 \
      libglib2.0-0 \
      wget

# 5. Install Playwright browsers
- run: npx playwright install

# 6. Run tests
- run: |
    npm test
    npm run test:coverage
    npm run test-frontend
    npm run test-frontend:coverage
